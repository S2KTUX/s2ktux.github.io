<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Terminal Pro</title>
<style>
body {
  background: #f4f4f4;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

.terminal-window {
  width: 750px;
  height: 420px;
  background: #1e1e1e;
  border-radius: 14px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.terminal-header {
  background: #2d2d2d;
  padding: 10px;
  display: flex;
  align-items: center;
}

.dot {
  height: 12px;
  width: 12px;
  border-radius: 50%;
  margin-right: 8px;
}

.red { background: #ff5f56; }
.yellow { background: #ffbd2e; }
.green { background: #27c93f; }

.terminal-body {
  flex: 1;
  padding: 20px;
  color: #e6e6e6;
  font-family: monospace;
  font-size: 14px;
  overflow-y: auto;
}

.line {
  white-space: pre-wrap;
}

.prompt {
  color: #00ff9c;
}

.command {
  color: #ffffff;
}

.output {
  color: #9cdcfe;
}

.error {
  color: #ff6b6b;
}

.input-line {
  display: flex;
}

.cursor {
  width: 8px;
  background: #ffffff;
  margin-left: 2px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%,50%,100% { opacity: 1; }
  25%,75% { opacity: 0; }
}
</style>
</head>
<body>

<div class="terminal-window">
  <div class="terminal-header">
    <div class="dot red"></div>
    <div class="dot yellow"></div>
    <div class="dot green"></div>
  </div>
  <div class="terminal-body" id="terminal"></div>
</div>

<script>
const terminal = document.getElementById("terminal");

const commands = {
  help: () => `
Available commands:
  help       Show this help
  about      About me
  skills     Technical skills
  projects   Show projects
  clear      Clear terminal
`,
  about: () => "Linux Systems Administrator focused on automation and infrastructure.",
  skills: () => "Linux | Bash | Networking | RHCSA | LPIC-1",
  projects: () => "1. Infra automation\n2. Server hardening\n3. Container labs",
  "ls -l": () => "total 3\n-rw-r--r-- projects\n-rw-r--r-- skills\n-rw-r--r-- about"
};

let history = [];
let historyIndex = 0;
let currentInput = "";
let inputLine;
let commandSpan;

function scrollBottom() {
  terminal.scrollTop = terminal.scrollHeight;
}

function print(text, className="output") {
  const line = document.createElement("div");
  line.className = "line " + className;
  line.textContent = text;
  terminal.appendChild(line);
  scrollBottom();
}

function newPrompt() {
  inputLine = document.createElement("div");
  inputLine.className = "input-line";

  const prompt = document.createElement("span");
  prompt.className = "prompt";
  prompt.textContent = "user@web:~$ ";

  commandSpan = document.createElement("span");
  commandSpan.className = "command";

  const cursor = document.createElement("span");
  cursor.className = "cursor";

  inputLine.appendChild(prompt);
  inputLine.appendChild(commandSpan);
  inputLine.appendChild(cursor);

  terminal.appendChild(inputLine);
  scrollBottom();
}

function executeCommand(cmd) {
  if (cmd === "clear") {
    terminal.innerHTML = "";
    newPrompt();
    return;
  }

  if (commands[cmd]) {
    print(commands[cmd]());
  } else if (cmd.trim() !== "") {
    print("Command not found: " + cmd, "error");
  }
}

document.addEventListener("keydown", function(e) {
  if (!commandSpan) return;

  // Ignorar combinaciones raras
  if (e.ctrlKey || e.metaKey || e.altKey) return;

  if (e.key === "Backspace") {
    e.preventDefault();
    currentInput = currentInput.slice(0, -1);
  }
  else if (e.key === "Enter") {
    e.preventDefault();

    // Convertir la lÃ­nea actual en fija
    commandSpan.textContent = currentInput;
    inputLine.querySelector(".cursor").remove();

    history.push(currentInput);
    historyIndex = history.length;

    executeCommand(currentInput.trim());

    currentInput = "";
    newPrompt();
    return;
  }
  else if (e.key === "ArrowUp") {
    e.preventDefault();
    if (historyIndex > 0) {
      historyIndex--;
      currentInput = history[historyIndex];
    }
  }
  else if (e.key === "ArrowDown") {
    e.preventDefault();
    if (historyIndex < history.length - 1) {
      historyIndex++;
      currentInput = history[historyIndex];
    } else {
      currentInput = "";
    }
  }
  else if (e.key.length === 1) {
    currentInput += e.key;
  }

  commandSpan.textContent = currentInput;
  scrollBottom();
});

newPrompt();
</script>
</body>
</html>
