<div class="lesson-wrapper">

    <header class="lesson-header">
        <span class="badge">RHCSA Objetivo</span>
        <h1>Administrar usuarios y grupos</h1>
        <p>Gesti√≥n de cuentas locales, pol√≠ticas de contrase√±as y privilegios sudo</p>

        <a href="https://youtu.be/3N-B_vGKTYQ" target="_blank" class="video-card">
            <div class="video-icon">üé¨</div>
            <div class="video-text">
                <strong>VER VIDEO YOUTUBE - CLASE 9</strong>
                <span>Administraci√≥n de usuarios, grupos y acceso privilegiado</span>
            </div>
        </a>
    </header>

    <div class="lesson-layout">

        <aside class="lesson-toc">
            <h4>Objetivos del bloque</h4>
            <ul>
                <li><a href="#obj1">1. Cuentas de usuario</a></li>
                <li><a href="#obj2">2. Pol√≠ticas de contrase√±a</a></li>
                <li><a href="#obj3">3. Grupos y membres√≠as</a></li>
                <li><a href="#obj4">4. Acceso privilegiado</a></li>
            </ul>
        </aside>

        <div class="course-content">

            <section id="obj1" class="lesson-section">
                <h3>1. Crear, eliminar y modificar cuentas de usuario locales</h3>
              <p>La administraci√≥n de usuarios en RHEL se basa principalmente en los archivos <code>/etc/passwd</code> y <code>/etc/shadow</code>, donde se almacenan los datos de cuenta y contrase√±as cifradas.</p>
                <p>Los parametros mas importantes al .crear un usuario son : </p>
                <ul>
                    <li><code>-u UID</code> ‚Üí Define un identificador de usuario espec√≠fico.</li>
                    <li><code>-g GRUPO</code> ‚Üí Asigna el grupo primario existente.</li>
                    <li><code>-G GRUPOS</code> ‚Üí A√±ade grupos secundarios.</li>
                    <li><code>-c "TEXTO"</code> ‚Üí Comentario descriptivo.</li>
                    <li><code>-s SHELL</code> ‚Üí Shell asignada (bash, zsh, nologin...).</li>
                    <li><code>-d RUTA</code> ‚Üí Directorio home personalizado.</li>
                    <li><code>-m</code> ‚Üí Crea autom√°ticamente el home.</li>
                </ul>
                <p>Tras crear la cuenta usamos <code>passwd</code> para asignar o modificar la contrase√±a.</p>
                <img src="/images/user-admin.png" alt="Ejemplo de gesti√≥n de usuarios">
                <p>Por otro lado, tenemos otros parametros para modificar cuentas de usuario : </p>
                <ul>
                    <li><code>-aG GRUPO</code> ‚Üí A√±ade grupos secundarios sin eliminar los existentes. ¬°¬°MUY IMPORTANTE!!</li>
                    <li><code>-L</code> ‚Üí Bloquea la cuenta.</li>
                    <li><code>-U</code> ‚Üí Desbloquea la cuenta.</li>
                    <li><code>-l NUEVO_LOGIN</code> ‚Üí Cambia el nombre de usuario.</li>
                    <li><code>-s NUEVA_SHELL</code> ‚Üí Modifica la shell.</li>
                    <li><code>-u NUEVO_UID</code> ‚Üí Cambia el UID.</li>
                </ul>
                <img src="/images/user-admin2.png" alt="Ejemplo de gesti√≥n de usuarios 2">
                <p>Para eliminar usuarios usamos opciones como <code>-r</code> (borra home y correo) o <code>-f</code> para forzar la eliminaci√≥n.</p>
                
            </section>

            <section id="obj2" class="lesson-section">
                <h3>2. Cambiar contrase√±as y configurar el envejecimiento</h3>
               <p>El comando <code>passwd</code> permite cambiar contrase√±as y gestionar diferentes opciones relacionadas con autenticaci√≥n (-h).</p>
                <img src="/images/passwd.png" alt="Uso de passwd" >
                <p>Para aplicar pol√≠ticas de seguridad usamos <code>chage</code>, que permite controlar expiraci√≥n, aviso previo y tiempo m√≠nimo entre cambios.</p>
                <p>Lo mejor para entender este comando es con esta imagen.:</p>
                <img src="/images/chage.png" alt="Chage exp imagen">
                <img src="/images/chage-comm.png" alt="Uso de chage para envejecimiento">
                <img src="/images/chage-ex.png" alt="Ejemplo chage">
                <p>Los valores por defecto de pol√≠ticas de contrase√±a se definen en <code>/etc/login.defs</code>.</p>
            </section>

            <section id="obj3" class="lesson-section">
                <h3>3. Crear, eliminar y modificar grupos locales</h3>
                <p>Los grupos permiten gestionar permisos para m√∫ltiples usuarios. Cada usuario tiene un grupo primario y puede pertenecer a varios grupos secundarios.</p>
                <p>Comandos principales:</p>
                <ul>
                    <li><code>groupadd</code> ‚Üí Crear grupos.</li>
                    <li><code>groupmod</code> ‚Üí Modificar grupos.</li>
                    <li><code>groupdel</code> ‚Üí Eliminar grupos.</li>
                </ul>
                <img src="/images/group-admin.png" alt="Gesti√≥n de grupos y membres√≠as">
                <p>Podemos verificar membres√≠as con <code>id</code>, <code>groups</code>, <code>getent group</code> o revisando <code>/etc/group</code>.</p>
                <img src="/images/group-check.png" alt="Check de grupos">
                <p> Por ultimo, podemos asignarle una contrase√±a a un grupo con el comando <code>gpasswd GRUPO</code>, y con este comando a√±adir usuarios a ese grupo <code>gpasswd -a USER grupo</code>, borrarlo con <code>-d</code>, eliminar la contrase√±a con <code>-r</code>...</p>
                <img src="/images/gpasswd.png" alt="pass de grupos">          
            </section>

            <section id="obj4" class="lesson-section">
                <h3>4. Configurar el acceso privilegiado</h3>
                <p>En lugar de compartir la contrase√±a de root, utilizamos <code>sudo</code> para delegar privilegios de forma controlada mediante <code>/etc/sudoers</code> y <code>/etc/sudoers.d/</code>.</p>
                <p>Para editar estos archivos de forma segura, usamos <code>visudo</code>, que verifica la sintaxis antes de guardar para evitar que perdamos el acceso al sistema. Podemos editar tanto el archivo principal como crear uno exclusivo, que lo editariamos con <code>visudo -f /etc/sudoers.d/ARCHIVO</code></p>
                <p>La sintaxis de sudoers es USUARIO/GRUPO MAQUINA=(USUARIO_A_SUPLANTAR) COMANDOS (los grupos van entre %). Tened en cuenta que si nos pidieran ejecutar algo sin interactividad o para ser usado en scripts se refieren al uso de <strong>NOPASSWD: X</strong>, siempre con un espacio entre : y los comandos</p>
                <img src="/images/sudoers.png" alt="Configuraci√≥n de sudoers">
                 <p>Otra forma habitual es a√±adir usuarios al grupo <code>wheel</code>.</p>
                <img src="/images/wheel.png" alt="grupo wheel privilegios">
                <p><code>sudo -i</code> carga el entorno completo de root, mientras que <code>sudo -s</code> abre una shell de root manteniendo el entorno del usuario.</p>
                
            </section>

        </div>
    </div>
</div>
