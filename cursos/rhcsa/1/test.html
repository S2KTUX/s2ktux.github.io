<!-- Archivo: content/rhcsa-gestion-software.html -->
<div class="lesson-content">
   
    <!-- T√≠tulo del Tema -->
    <h3>Gesti√≥n de Software en Linux (RPM y Flatpak)</h3>
    <p>Gesti√≥n de paquetes y repositorios.</p>
   
    <!-- Caja de Video Asociado (Usando terminal-callout) -->
    <div class="terminal-callout">
        <strong>üì∫ Video asociado:</strong> 
        <a href="https://youtu.be/GM_9D8zNOag" target="_blank">Ver en YouTube - Clase 2</a>
    </div>

    <!-- Alerta (Usando lesson-alert) -->
    <div class="lesson-alert">
        ‚ö†Ô∏è Atenci√≥n: Punto 3 y 4 SOLO PARA RHCSA V10
    </div>

    <hr>

    <!-- OBJETIVO 1 -->
    <h4>1. Configurar el acceso a los repositorios de RPM</h4>
    <p>Los repositorios RPM son fuentes de software que permiten instalar y actualizar paquetes usando gestores como <strong>dnf</strong>. En RHEL, los repositorios se definen mediante archivos <strong>.repo</strong> en <code>/etc/yum.repos.d/</code>.</p>
   
    <p>El contenido principal de un .repo, por ejemplo, es:</p>
    <img src="/images/repo-rpm.png" alt="Contenido .repo" class="lesson-img">
   
    <p>Donde cada campo significa:</p>
    <ul>
        <li><strong>[id-del-repo]</strong> ‚Üí Identificador del repositorio.</li>
        <li><strong>name</strong> ‚Üí Nombre descriptivo.</li>
        <li><strong>baseurl</strong> ‚Üí Enlace directo al servidor (Si es local: <code>baseurl=file:///RUTA-MONTAJE</code>).</li>
        <li><strong>enabled</strong> ‚Üí Activo (1) o ignorado (0).</li>
        <li><strong>gpgcheck</strong> ‚Üí Validar firma (1) o no (0).</li>
        <li><strong>gpgkey</strong> ‚Üí URL de la clave p√∫blica.</li>
    </ul>
    <p>Para el examen, probablemente pidan <code>gpgcheck=0</code>. Para crear un repo local (iso) debemos montarlo previamente: <code>mount -o loop /RUTA-iso /RUTA-montaje</code>.</p>
   
    <p>Siempre que a√±adamos un repositorio, debemos:</p>
    <ul>
        <li><code>dnf clean all</code> (Limpiar)</li>
        <li><code>dnf makecache</code> (Regenerar cach√©)</li>
        <li><code>dnf repolist</code> (Comprobar)</li>
    </ul>
   
    <img src="/images/recargar-repo-rpm.png" alt="Recargar repositorio" class="lesson-img">
    <p>Comandos de gesti√≥n:</p>
    <ul>
        <li><code>dnf config-manager --add-repo=URL</code> ‚Üí A√±ade repo.</li>
        <li><code>dnf config-manager --set-enabled [id]</code> ‚Üí Habilita.</li>
        <li><code>dnf config-manager --set-disabled [id]</code> ‚Üí Deshabilita.</li>
        <li><code>rm /etc/yum.repos.d/[nombre].repo</code> ‚Üí Elimina.</li>
    </ul>

    <hr>

    <!-- OBJETIVO 2 -->
    <h4>2. Instalar y eliminar paquetes de software RPM</h4>
    <p>Los gestores principales son <strong>RPM</strong> (no resuelve dependencias) y <strong>DNF</strong> (s√≠ resuelve). Yum est√° obsoleto.</p>
    
    <div class="terminal-callout" style="border-color: var(--text-muted); border-left-color: var(--text-muted);">
        <strong>Nota:</strong> Usa <code>rpm -qa</code> para listar todo lo instalado en el sistema.
    </div>

    <p><strong>Comandos RPM:</strong></p>
    <ul>
        <li><code>rpm -ivh paquete.rpm</code> ‚Üí Instalar local.</li>
        <li><code>rpm -Uvh paquete.rpm</code> ‚Üí Actualizar/Instalar.</li>
        <li><code>rpm -e nombre_paquete</code> ‚Üí Eliminar.</li>
        <li><code>rpm -V nombre_paquete</code> ‚Üí Verificar integridad.</li>
        <li><code>rpm -qa</code> ‚Üí Listar todos los instalados.</li>
        <li><code>rpm -qf archivo</code> ‚Üí ¬øA qu√© paquete pertenece este archivo?</li>
        <li><code>rpm -qi paquete</code> ‚Üí Info detallada.</li>
        <li><code>rpm -ql paquete</code> ‚Üí Listar archivos del paquete.</li>
    </ul>
    
    <p><strong>Comandos DNF:</strong></p>
    <ul>
        <li><code>dnf install paquete</code> ‚Üí Instalar.</li>
        <li><code>dnf download paquete</code> ‚Üí Descargar .rpm.</li>
        <li><code>dnf remove paquete</code> ‚Üí Eliminar.</li>
        <li><code>dnf upgrade paquete</code> ‚Üí Actualizar.</li>
        <li><code>dnf search paquete</code> ‚Üí Buscar.</li>
        <li><code>dnf list installed</code> ‚Üí Listar instalados.</li>
        <li><code>dnf repoquery paquete</code> ‚Üí Busca disponibles.</li>
        <li><code>dnf info paquete</code> ‚Üí Info del paquete.</li>
        <li><code>dnf provides comando</code> ‚Üí ¬øQu√© paquete tiene este comando?</li>
    </ul>
    
    <p>Podemos ver el historial con <code>dnf history</code> y deshacer acciones con <code>dnf history undo N¬∫</code>.</p>
    <img src="/images/history-rpm.png" alt="Historial DNF" class="lesson-img">
    
    <p>Para extraer archivos concretos de un RPM sin instalarlo, usamos <code>rpm2cpio</code> + <code>cpio -idv</code>:</p>
    <img src="/images/recuperar-archivo-rpm.png" alt="rpm2cpio" class="lesson-img">

    <hr>

    <!-- OBJETIVO 3 -->
    <h4>3. Configurar el acceso a los repositorios de Flatpak</h4>
    <p>Flatpak es un sistema de distribuci√≥n independiente de la distro, con dependencias aisladas. Podemos usar <code>+oci</code> para formato OCI. El repo com√∫n es <strong>Flathub</strong>.</p>
    
    <p>Comandos de gesti√≥n de repositorios:</p>
    <ul>
        <li><code>flatpak remote-add</code> ‚Üí A√±adir.</li>
        <li><code>flatpak remotes</code> ‚Üí Listar.</li>
        <li><code>flatpak remote-delete</code> ‚Üí Eliminar.</li>
    </ul>
    <img src="/images/flatpak-repo.png" alt="Gesti√≥n Flatpak" class="lesson-img">
    <p>Esto es para el usuario actual. Para todos: a√±ade <code>--system</code>.</p>
   
    <p>Para a√±adir un repo oficial de RED HAT en el examen:</p>
    <img src="/images/flatpak-redhat.png" alt="Repo Red Hat Flatpak" class="lesson-img">
   
    <div class="terminal-callout">
        <strong>Tip:</strong> Si falla la autenticaci√≥n con <code>--auth-file</code>, configura manualmente los permisos.
    </div>

<pre><code>cp $XDG_RUNTIME_DIR/containers/auth.json /etc/flatpak/oci-auth.json
chmod 644 /etc/flatpak/oci-auth.json</code></pre>

    <hr>

    <!-- OBJETIVO 4 -->
    <h4>4. Instalar y eliminar paquetes de software Flatpak</h4>
    <p>Las aplicaciones usan nombre completo (ej: <code>org.mozilla.firefox</code>).</p>
    <ul>
        <li><code>flatpak install app</code> ‚Üí Instalar.</li>
        <li><code>flatpak update app</code> ‚Üí Actualizar.</li>
        <li><code>flatpak info app</code> ‚Üí Informaci√≥n.</li>
        <li><code>flatpak list</code> ‚Üí Listar instaladas.</li>
        <li><code>flatpak run app</code> ‚Üí Ejecutar.</li>
        <li><code>flatpak ps</code> ‚Üí Ver corriendo.</li>
        <li><code>flatpak uninstall app</code> ‚Üí Eliminar.</li>
        <li><code>flatpak search app</code> ‚Üí Buscar.</li>
    </ul>
    <img src="/images/flatpak-install.png" alt="Instalaci√≥n Flatpak" class="lesson-img">
</div>
