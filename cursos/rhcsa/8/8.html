<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RHCSA - Administrar redes básicas y seguridad">
    <meta name="keywords" content="RHCSA, Linux, nmcli, IPv4, IPv6, hostname, firewalld, firewall-cmd">
    <meta name="author" content="S2KTUX">
    <title>S2KTUX - RHCSA | Administrar redes básicas</title>
    <link rel="stylesheet" href="/conf/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="/images/favicon.png">
</head>
<body>

<div class="gradient-bg"></div>

<header>
    <div class="header-left">
        <a href="/index.html" class="header-logo">S2KTUX</a>
    </div>
    <nav>
        <a href="/index.html">Inicio</a>
        <a href="/cursos/cursos.html">Cursos</a>
        <a href="/proyectos/proyectos.html">Proyectos</a>
    </nav>
</header>

<main id="contenido">

    <div class="hero">
        <h1>Administrar redes básicas</h1>
        <p>Configuración de IP, Hostname y Firewall</p>
        <p><a href="https://youtu.be/cjx4DZ7tJI0" target="_blank">VER VIDEO YOUTUBE - CLASE 8</a></p>
    </div>

    <a href="/cursos/cursos.html" class="back-link">← Volver al curso RHCSA</a>

    <div class="course-page">

        <div class="sidebar">
            <h3>Objetivos del bloque</h3>
            <ul>
                <li><a href="#obj1">IPv4 e IPv6</a></li>
                <li><a href="#obj2">Nombre de Host</a></li>
                <li><a href="#obj3">Servicios en el arranque</a></li>
                <li><a href="#obj4">Firewall y Seguridad</a></li>
            </ul>
        </div>

        <div class="content">

            <section id="obj1">
                <h3>Configurar direcciones IPv4 e IPv6</h3>
                <p>En RHEL, la gestión de red se realiza principalmente a través de <strong>NetworkManager</strong> utilizando la herramienta de línea de comandos <code>nmcli</code>. Tambien podemos usar el comando <code>nmtui</code> para modificar con interfaz grafica o hacer cambios temporales con el comando <code>ip</code>.</p>
                <p>Con <strong>nmcli</strong>, que es el que principalmente usaremos, podemos crear una red, modificar, eliminar y gestionar el estado de las interfaces de forma dinámicas. </p>
                <img src="/images/nmcli-config.png" alt="nmcli ejemplo configuración" width="1200">
                <p> Para configuraciones wifi la interfaz sería algo como : <code>nmcli connection add type wifi ifname [INTERFAZ] con-name [NOMBRE] ssid [NOMBRE_RED] -- wifi-sec.key-mgmt wpa-psk wifi-sec.psk [CONTRASEÑA]</code> y luego el resto de comandos como en ethernet</p>
                <p>IPV6 sería completamente igual pero usando <code>ipv6.X</code>. Recordad que es muy importante el <code>connection.autoconnect yes</code> para que se active al arrancar.Una vez aplicados los comandos, usamos <code>nmcli con up "ID"</code> para activar la nueva configuración. Podemos verificar los cambios con <code>ip addr show</code>. </p>
                <p>Por otro lado, nos podrían pedir una ruta estatica especifica para llegar a una red que no es la determinada. Aquí entra las routes. Nosotros añadimos una ruta por defecto cuando la creamos con <code>ipv4.gateway IP</code>, pero podemos tener rutas estaticas. El + es para que añada y no sustituya lo que ya existe. </p>
                <img src="/images/nmcli-route.png" alt="nmcli ejemplo configuración" width="1000">
                <p>Por ultimo, al crear la interfaz podríamos añadir 2 DNSs : <code>ipv4.dns "8.8.8.8 1.1.1.1"</code> </p>
            </section>
                <h3>Configurar la resolución del nombre de host</h3>

            <section id="obj2">
                <p>El nombre de host (hostname) identifica al equipo en la red. Para que el cambio sea permanente en RHEL, utilizamos <code>hostnamectl</code>. Tambien podríamos editar el archivo <code>/etc/hostname</code> pero este requiere reinicio para que se aplique</p>
                <img src="/images/hostname.png" alt="hostname ejemplo configuración" width="900">
                <p>Además, para la resolución local sin DNS, editamos el archivo <code>/etc/hosts</code>. Con esta configuración conseguimos que el sistema se reconozca a sí mismo rápidamente Su sintaxis es : IP_HOST NOMBRE_COMPLETO NOMBRE_CORTO(ALIAS)</p>
                <img src="/images/etc-host.png" alt="archivo ejemplo /etc/hosts" width="900">
                <p> Recordad no tocar el archivo /etc/resolv.conf porque una vez reinicies el servicio o la maquina, Network Manager sobreescribirá el contenido.</p>
                <p> La forma correcta para una configuración de DNS persistente es con <code>nmcli</code>, <code>nmtui</code> o los archivos <code>.nmconnection</code> y <code>nmcli con up NOMBRE-RED</code> para aplicar el cambio. </p>
            </section>

            <section id="obj3">
                <h3>Servicios de red al inicio del sistema</h3>
                <p>Para asegurar que nuestra configuración de red sea efectiva desde el arranque, el servicio <strong>NetworkManager</strong> debe estar habilitado y activo : <code>systemctl enable --now NetworkManager</code>.</p>
                <p>Si utilizamos el nmcli, recordad usar el <code>nmcli con mod INTERFAZ connection.autoconnect yes</code> para que se inicie automaticamente.</p>
                <p> Las comprobaciones que podemos hacer son : ip a, nm-online, nmcli device status, systemctl status NetworkManager... En la imagen vemos diferentes formas de comprobar que tenemos red </p>
                <img src="/images/check-net.png" alt="check net ejemplo" width="700">
                <p> Como extra, si creamos servicios personalizados que dependen de la red, debemos usar la directiva <code>After=network-online.target</code> en la sección [Unit] (<code>/etc/systemd/system</code>) y Wants=network-online.target. del archivo del servicio para que no se quede el sistema bloqueado.</p>
            </section>

            <section id="obj4">
                <h3>Restringir acceso con firewalld y firewall-cmd</h3>
                <p>La seguridad en RHEL se gestiona mediante <strong>firewalld</strong>, que organiza las reglas en "zonas". Para comprobar el estado del servicio podemos usar <code>systemctl status firewalld</code> o <code>firewall-cmd --state</code>.</p>
                <p>Las zonas son un conjunto de reglas que determinan qué tráfico se permite o se deniega. Las zonas más comunes son : </p>
                <ul>
                    <li><strong>public:</strong> Zona estándar de confianza baja. Solo se permite el tráfico entrante de servicios específicos (como SSH) y el resto se descarta.</li>
                    <li><strong>drop:</strong> Nivel de seguridad máximo. El sistema descarta los paquetes entrantes sin enviar ninguna respuesta al emisor (silencio total).</li>
                    <li><strong>block:</strong> El sistema rechaza las conexiones entrantes enviando un mensaje de "ICMP host prohibited", informando que el acceso está denegado.</li>
                    <li><strong>internal:</strong> Orientada a redes locales seguras. Permite de forma predefinida más servicios para facilitar la comunicación entre equipos conocidos.</li>
                    <li><strong>trusted:</strong> Confianza absoluta. Se aceptan todas las conexiones entrantes sin aplicar ningún filtro de seguridad.</li>
                </ul>
                <p> Cada interfaz puede tener una zona, y podemos cambiarla, poner una por defecto, comprobar el estado actual...  </p>
                <img src="/images/firewall-basic.png" alt="firewall-cmd ejemplo" width="900">
                <p> Además de cambiar la zona, podemos agregarle diferentes reglas, listar las reglas actualews ( Recordad el <code>--permanent</code> para que sea persistente a reinicios y el <code>firewall-cmd --reload</code> para recargar la configuración) :</p>
                <img src="/images/firewall-basic2.png" alt="firewall-cmd ejemplo" width="900">
                <p>Las rich rules permiten crear reglas más detalladas que las reglas normales. Igualmente, y a pesar de explicarlo detalladamente en el video, lo dejamos para la clase 10.</p>
            </section>

        </div>
    </div>
</main>

<footer>
    <div class="footer-content">
        <p>S2KTUX | Un lugar para aprender sistemas y redes</p>
        <div class="footer-links">
            <a href="https://github.com/s2ktux">GitHub</a>
            <a href="mailto:alaisysadm@gmail.com">Contacto</a>
            <a href="https://www.youtube.com/@s2ktux">YouTube</a>
        </div>
    </div>
</footer>

<a href="#" id="back-to-top">↑ Volver arriba</a>
<script src="/conf/scripts.js"></script>

</body>
</html>
