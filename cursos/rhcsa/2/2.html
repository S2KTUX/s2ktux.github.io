<div class="lesson-wrapper">
    <header class="lesson-header">
        <span class="badge">RHCSA Objetivo 2</span>
        <h1>AdministraciÃ³n del Software</h1>
        <p>GestiÃ³n de paquetes y repositorios en sistemas Linux (RPM y Flatpak)</p>
        
        <a href="https://youtu.be/GM_9D8zNOag" target="_blank" class="video-card">
            <div class="video-icon">ğŸ¬</div>
            <div class="video-text">
                <strong>VER VIDEO YOUTUBE - CLASE 2</strong>
                <span>GestiÃ³n de software y repositorios paso a paso</span>
            </div>
        </a>
    </header>

    <div class="lesson-layout">
        <aside class="lesson-toc">
            <h4>Objetivos del bloque</h4>
            <ul>
                <li><a href="#obj1">1. Repositorios RPM</a></li>
                <li><a href="#obj2">2. GestiÃ³n de paquetes RPM</a></li>
                <li><a href="#obj3">3. Repositorios Flatpak</a></li>
                <li><a href="#obj4">4. GestiÃ³n de paquetes Flatpak</a></li>
            </ul>
        </aside>

        <div class="course-content">
            
            <div class="lesson-alert" style="background: rgba(255,165,0,0.1); border-left: 4px solid #ffa500; padding: 15px; margin-bottom: 20px; border-radius: 4px;">
                <strong>âš ï¸ ATENCIÃ“N:</strong> Los puntos 3 y 4 son exclusivos para <strong>RHCSA v10</strong>.
            </div>

            <section id="obj1" class="lesson-section">
                <h3>1. Configurar el acceso a los repositorios de RPM</h3>
                <p>Los repositorios son fuentes de software que se definen mediante archivos <code>.repo</code> en <code>/etc/yum.repos.d/</code>. Son esenciales para que <strong>dnf</strong> pueda resolver dependencias automÃ¡ticamente.</p>
                
                <img src="/images/repo-rpm.png" alt="Estructura de un archivo .repo">
                <p>Donde cada campo significa:</p>
                <ul>
                    <li><strong>[id-del-repo]</strong> â†’ Identificador del repositorio.</li>
                    <li><strong>name</strong> â†’ Nombre descriptivo.</li>
                    <li><strong>baseurl</strong> â†’ Enlace directo al servidor donde se encuentran los paquetes RPM (Si es local: baseurl=file:///RUTA-MONTAJE).</li>
                    <li><strong>enabled</strong> â†’ Define si el repositorio estÃ¡ activo (1) o ignorado (0).</li>
                    <li><strong>gpgcheck</strong> â†’ Indica si el sistema debe validar la firma de seguridad de los paquetes (1) o no (0).</li>
                    <li><strong>gpgkey</strong> â†’ URL de la clave pÃºblica del proveedor para verificar la autenticidad del software.</li>
                </ul>
                <p>Comandos de mantenimiento tras aÃ±adir un repo:</p>
                <ul>
                    <li><code>dnf clean all</code> â†’ Limpia la cachÃ©.</li>
                    <li><code>dnf makecache</code> â†’ Regenera la cachÃ©.</li>
                    <li><code>dnf repolist</code> â†’ Comprueba los repositorios activos.</li>
                </ul>
                <img src="/images/recargar-repo-rpm.png" alt="Refrescar repositorios">
                <p>Por Ãºltimo, podrÃ­amos gestionar repositorios a travÃ©s de comandos:</p>
                <ul>
                    <li><strong>dnf config-manager --add-repo=URL</strong> â†’ AÃ±ade un nuevo repositorio desde una URL.</li>
                    <li><strong>dnf config-manager --set-enabled [id-del-repo]</strong> â†’ Habilita un repositorio.</li>
                    <li><strong>dnf config-manager --set-disabled [id-del-repo]</strong> â†’ Deshabilita un repositorio.</li>
                    <li><strong>sudo rm /etc/yum.repos.d/[nombre-archivo].repo</strong> â†’ Elimina el repositorio borrando su archivo.</li>
                </ul>
            </section>
            </section>

            <section id="obj2" class="lesson-section">
                <h3>2. Instalar y eliminar paquetes de software RPM</h3>
                <p>Los gestores de paquetes principales en sistemas modernos son <strong>RPM y DNF</strong>. RPM permite gestionar paquetes pero no resuelve dependencias automÃ¡ticamente, mientras que DNF sÃ­ lo hace. Yum estÃ¡ obsoleto.</p>
                <p>Comandos mÃ¡s utilizados de <strong>RPM</strong>:</p>
                <ul>
                    <li><strong>rpm -ivh paquete.rpm</strong> â†’ Instalar un paquete RPM localmente.</li>
                    <li><strong>rpm -Uvh paquete.rpm</strong> â†’ Actualiza (o instala) un paquete rpm.</li>
                    <li><strong>rpm -e nombre_paquete</strong> â†’ Eliminar un paquete instalado.</li>
                    <li><strong>rpm -V nombre_paquete</strong> â†’ Verificar la integridad de los archivos.</li>
                    <li><strong>rpm -qa</strong> â†’ Listar todos los paquetes instalados.</li>
                    <li><strong>rpm -qf</strong> â†’ Consulta a quÃ© paquete pertenece un comando o archivo.</li>
                    <li><strong>rpm -qi nombre_paquete</strong> â†’ Mostrar informaciÃ³n detallada de un paquete instalado.</li>
                    <li><strong>rpm -ql paquete</strong> â†’ Lista los archivos que existen en un paquete.</li>
                </ul>

                <p>Comandos mÃ¡s utilizados de <strong>DNF</strong>:</p>
                <ul>
                    <li><strong>dnf install paquete</strong> â†’ Instalar un paquete.</li>
                    <li><strong>dnf download paquete</strong> â†’ Descargar un paquete .rpm.</li>
                    <li><strong>dnf remove paquete</strong> â†’ Eliminar un paquete.</li>
                    <li><strong>dnf upgrade paquete</strong> â†’ Actualizar el paquete.</li>
                    <li><strong>dnf search paquete</strong> â†’ Buscar paquetes.</li>
                    <li><strong>dnf list (installed)</strong> â†’ Lista todos los paquetes (instalados).</li>
                    <li><strong>dnf repoquery paquete</strong> â†’ Busca los paquetes disponibles.</li>
                    <li><strong>dnf info paquete</strong> â†’ InformaciÃ³n de un paquete (similar a qi).</li>
                    <li><strong>dnf provides</strong> â†’ Indica quÃ© paquete pertenece a un comando o archivo (similar a qf).</li>
                </ul>
                <p>Dentro de dnf podemos ver su historial con <code>dnf history</code> y deshacer acciones con <code>dnf history undo NÂº</code>.</p>
                <img src="/images/history-rpm.png" alt="Historial DNF">
                <p>Para extraer archivos concretos de un paquete RPM usamos <code>rpm2cpio</code> junto con <code>cpio -idv</code>:</p>
                <img src="/images/recuperar-archivo-rpm.png" alt="Uso de rpm2cpio">
            </section>

            <section id="obj3" class="lesson-section">
                <h3>3. Configurar el acceso a los repositorios de Flatpak</h3>
                <p>Flatpak es un sistema de distribuciÃ³n independiente diseÃ±ado para aplicaciones de escritorio con dependencias aisladas. Los repositorios pueden aÃ±adirse mediante:</p>
Â  Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak remote-add --if-not-exists flathub URL</strong> â†’ AÃ±adir repositorios</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak remotes</strong> â†’ Listar repositorios configurados</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak remote-delete</strong> â†’ Eliminar repositorios</li>
Â  Â  Â  Â  Â  Â  Â  Â  </ul>
                <p>Esto se crea para el usuario actual; para todos los usuarios aÃ±adiremos <code>--system</code>.</p>
                <p> En el examen RHCSA nos podrÃ­an pedir aÃ±adir un repositorio oficial de RED HAT :</p>
                <img src="/images/flatpak-redhat.png" alt="Configurar repo oficial Red Hat">
                <p>Si <code>--auth-file</code> falla, usamos la configuraciÃ³n manual: <code>cp $XDG_RUNTIME_DIR/containers/auth.json /etc/flatpak/oci-auth.json</code> y <code>chmod 644 /etc/flatpak/oci-auth.json</code>.</p>
            </section>

            <section id="obj4" class="lesson-section">
                <h3>4. Instalar y eliminar paquetes de software Flatpak</h3>
                <p>Una vez configurado un repositorio Flatpak, podemos gestionar aplicaciones de forma sencilla y segura. Las aplicaciones Flatpak usan nombres de dominio invertidos (ej: <code>org.mozilla.firefox</code>) para su gestiÃ³n.</p>

                <ul>
                    <li><strong>flatpak install app</strong> â†’ Instalar una aplicaciÃ³n</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak update app</strong> â†’ Actualizar una aplicaciÃ³n</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak info app</strong> â†’ InformaciÃ³n de una aplicaciÃ³n</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak list</strong> â†’ Listar aplicaciones instaladas</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak run app</strong> â†’Â  Lanzar una aplicaciÃ³n</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak ps app</strong> â†’ Ver las aplicaciones que estÃ¡n corriendo</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak uninstall app</strong> â†’ Eliminar una aplicaciÃ³n</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>flatpak search app</strong> â†’ Buscar una aplicaciÃ³n</li>
                </ul>
                <img src="/images/flatpak-install.png" alt="InstalaciÃ³n Flatpak">
            </section>

        </div>
    </div>
</div>
